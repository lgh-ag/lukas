<html>
  <head>
    <title>Ferien-Counter made by Lukas</title>
    <link rel="stylesheet" href="https://bootswatch.com/4/cyborg/bootstrap.css">
  </head>
  <body>
    <!-- <{tag} {attribut}>{content}</{tag}> -->
    <h1>📅Ferien-Countdown📅</h1>
    <p id="FerienCounter">2 Wochen, 1 Tag, 8 Stunden, 32 Minuten, 45 Sekunden</p>
    <h3>bis zu den Osterferien!📅 </h3>
    <select id= "FerienAuswahl">
      <option value="winterferien-2022-TH">Winterferien❄️</option>
      <option value="osterferien-2022-TH">Osterferien🐣</option>
      <option value="pfingstferien-2022-TH">Pfingstferien</option>
      <option value="sommerferien-2022-TH">Sommerferien☀️</option>
      <option value="herbstferien-2022-TH">Herbstferien🍂</option>
      <option value="weihnachtsferien-2022-TH">Weihnachtsferien🎄</option>
    </select>
    <br>
    <table border="5px">
      <thead>
        <tr>
          <td>
            <p>Ferien</p>
          </td>
          <td>
            <p>Beginn</p>
          </td>
          <td>
            <p>Ende</p>
          </td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <p>Sommerferien</p>
          </td>
          <td>
            <p>01.01.2021</p>
          </td>
          <td>
            <p>31.12.2021</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>Osterferien</p>
          </td>
          <td>
            <p>01.04.2021</p>
          </td>
          <td>
            <p>02.04.2021</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>Weihnachtsferien</p>
          </td>
          <td>
            <p>17.12.2021</p>
          </td>
          <td>
            <p>01.01.2022</p>
          </td>
        </tr>

      </tbody>
    </table>
    <a href="https://github.com/lgh-ag/lghag.de">Unser Github</a>
    <script>
      var json = "";
      var obj = null;

      function reqListener () {
        json = this.responseText;
        obj = JSON.parse(json);
        getSecounds();
      }

      var oReq = new XMLHttpRequest();
      oReq.addEventListener("load", reqListener);
      oReq.open("GET", "http://lgh-ag-cors.herokuapp.com/https://ferien-api.de/api/v1/holidays/TH/2022");
      oReq.setRequestHeader("x-requested-with", "lghag.de");
      oReq.send();

      function getSecounds() {
        var ferienDate = Date.parse(obj[0].start);
        var currentDate = Date.now();
       
        var milli = ferienDate - currentDate;

        var abgezogen = 0;
        
        var wochen = Math.floor(milli / 1000 / 60 / 60 / 24 /7);
        abgezogen = abgezogen + wochen * 1000 * 60 * 60 * 24 * 7;
        console.log(wochen);
        
        var tage = Math.floor((milli - abgezogen)  / 1000 / 60 / 60 / 24);
        abgezogen = abgezogen + tage * 1000 * 60 * 60 * 24;
        console.log(tage);
        
        var stunden = Math.floor((milli - abgezogen) / 1000 / 60 / 60);
        abgezogen = abgezogen + stunden * 1000 * 60 * 60;
        console.log(stunden);
        
        var minuten = Math.floor((milli - abgezogen) / 1000 / 60);
        abgezogen = abgezogen + minuten * 1000 * 60;
        console.log(minuten);
        
        var sekunden = Math.floor((milli - abgezogen) / 1000);
        console.log(sekunden);
        
        console.log("-------------187-----------");
        
        
        document.getElementById("FerienCounter").innerText = "Es sind noch:  " + wochen + " Wochen, " + tage + " Tage, " + stunden + " Stunden, " + minuten + "Minuten, " + sekunden + " Sekuden";
        setTimeout(getSecounds, 1000);
      }

      var select = document.getElementById("FerienAuswahl");

      

      function selectChange() {
        console.log(select.value);
      }
      
      select.onchange = selectChange; 
    </script>
  </body>
</html>  